!function(t){"use strict";t.module("moviecat",["ngRoute","moviecat.detail","moviecat.list","moviecat.auto-focus"]).constant("AppConfig",{pageSise:10,listApiUrl:"https://api.douban.com/v2/movie/",detailApiUrl:"https://api.douban.com/v2/movie/subject/"}).config(["$routeProvider",function(t){t.otherwise({redirectTo:"/in_theaters/1"})}]).controller("navController",["$scope","$route","AppConfig",function(t,e,o){console.log(o),t.text="",t.search=function(){e.updateParams({type:"search",q:t.text})}}])}(angular),!function(t){var e=t.module("moviecat.services.http",[]);e.service("HttpServices",["$document","$window",function(t,e){this.jsonp=function(o,i,a){var n=o.indexOf("?")==-1?"?":"";for(var r in i)n+=r+"="+i[r]+"&";var c="mc_qs_p"+Math.random().toString().replace(".",""),o=o+n+"callback="+c;e[c]=a;var l=t[0].createElement("script");l.src=o,t[0].body.appendChild(l),t[0].body.removeChild(l)}}])}(angular),!function(t){"use strict";var e=t.module("moviecat.list",["ngRoute","moviecat.services.http"]);e.config(["$routeProvider",function(t){t.when("/:type/:d",{templateUrl:"movie_list/view.html",controller:"MovieListController"})}]),e.controller("MovieListController",["$scope","$route","$routeParams","HttpServices","AppConfig",function(t,e,o,i,a){t.subjects=[],t.msg="",t.title="Loading...",t.loading=!0,t.pageCount=0,t.sum=0;var n=a.pageSise;t.page=parseInt(o.d);var r=(t.page-1)*n;i.jsonp(a.listApiUrl+o.type,{count:n,start:r,q:o.q},function(e){t.subjects=e.subjects,t.sum=e.total,t.title=e.title,t.pageCount=Math.ceil(parseInt(t.sum)/5),t.loading=!1,t.$apply()}),t.goPage=function(t){e.updateParams({d:t})}}])}(angular),!function(t){t.module("moviecat.auto-focus",[]).directive("autoFocus",["$location",function(t){return{restrict:"A",link:function(e,o,i,a){e.$location=t,e.$watch("$location.path()",function(t){var e=o.children().attr("href"),i=e.replace(/#(\/.+?)\/\d+/,"$1");t.startsWith(i)&&(o.parent().children().removeClass("active"),o.addClass("active"))})}}}])}(angular),!function(t){"use strict";var e=t.module("moviecat.detail",["ngRoute","moviecat.services.http"]);e.config(["$routeProvider",function(t){t.when("/subject/:id",{templateUrl:"movie_detail/view.html",controller:"MovieDetailController"})}]),e.controller("MovieDetailController",["$scope","$route","$routeParams","HttpServices","AppConfig",function(t,e,o,i,a){t.data={},t.loading=!0,i.jsonp(a.detailApiUrl+o.id,{},function(e){console.log(e),t.data=e,t.loading=!1,t.$apply()})}])}(angular);